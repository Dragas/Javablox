language: java
install: true
dist: xenial

script:
 - ./gradlew build --scan -s

before_cache:
 - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
 - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
 directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/

before_install:
 - ./gradlew wrapper
 - chmod +x gradlew

jdk: oraclejdk11

after_success:
  - wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
  - chmod +x send.sh
  - ./send.sh success $TCLRAINBOW
  - ./send.sh success $Sanjay
after_failure:
  - wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
  - chmod +x send.sh
  - ./send.sh failure $TCLRAINBOW
  - ./send.sh failure $Sanjay
