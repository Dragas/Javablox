language: java
install: true
dist: xenial
script:
- "./gradlew build --scan -s"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_install:
- chmod +x gradlew
- chmod +x deploy.sh
- openssl aes-256-cbc -K $encrypted_b8b4d31050a3_key -iv $encrypted_b8b4d31050a3_iv -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- ls -lA
- "./gradlew wrapper"
jdk: oraclejdk11
after_success:
- "./deploy.sh"
- wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
- chmod +x send.sh
- "./send.sh success $TCLRainbow"
- "./send.sh success $Sanjay"
after_failure:
- wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
- chmod +x send.sh
- "./send.sh failure $TCLRainbow"
- "./send.sh failure $Sanjay"
